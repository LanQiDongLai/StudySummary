### 虚函数表构建与调用

虚函数表同一个类的实例所共享的资源，虚函数表在编译时候确定，并存在于常量区中，如果代码中没有该类的实例，那么编译器不会生成该函数表

虚函数的调用过程

其中-0x8($rbp)存储了&node

<img src="/home/LanQiDongLai/.config/Typora/typora-user-images/image-20230820220120063.png" alt="image-20230820220120063" style="zoom:80%;" />

> 注：编译器是根据函数名查找虚函数表的
>
> 编译器会将所有的虚函数指针按照一定排版放入虚函数表中（一般按照声明顺序），然后子类继承的时候也会按照相同的顺序放入虚函数表，在调用中，函数名会根据编译器内部保存的表转变成虚函数表的索引

虚函数表的结构

<img src="https://img-blog.csdn.net/20160528104806455" alt="这里写图片描述" style="zoom:80%;" />

<img src="https://img-blog.csdnimg.cn/img_convert/a13123af4c1a645bdd8288dbc44c6cd1.png" alt="image-20211203111747442" style="zoom:80%;" />


